{"version":3,"sources":["webpack:///./src/views/LoginPage.vue?ef7a","webpack:///src/views/LoginPage.vue","webpack:///./src/views/LoginPage.vue?be03","webpack:///./src/views/LoginPage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","error","staticRenderFns","name","data","computed","mapState","methods","mapActions","mounted","window","component"],"mappings":"gHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAAEN,EAAS,MAAEI,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,GAAG,QAAU,WAAW,CAACP,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,UAAUN,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,GAAG,QAAU,YAAY,CAACP,EAAIQ,GAAG,+BAA+B,IAC/TG,EAAkB,G,0DCaP,GACbC,KAAFA,YACEC,KAFF,WAGI,MAAJ,CACMH,MAANA,OAGEI,SAAFA,kBACAC,0BAEEC,QAAFA,kBACAC,8DAEEC,QAbF,WAaI,IAAJ,OAAI,OAAJ,4JACA,kCADA,UACA,QADA,QAGA,cAHA,uBAIA,sBAJA,0BAWAN,EAAA,GACA,+BACAA,gCAEA,gCACAA,iCAEA,aAGAA,2BAIAO,6BACA,iBACA,yBACA,4BACA,4BAIAA,eAjCA,gDC3BmV,I,YCO/UC,EAAY,eACd,EACArB,EACAY,GACA,EACA,KACA,KACA,MAIa,aAAAS,E","file":"js/login.c4c6b952.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[(_vm.error)?_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(_vm._s(_vm.error))]):_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"primary\"}},[_vm._v(\"You can close the window\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container-fluid\">\n    <b-alert show variant=\"danger\" v-if=\"error\">{{ error }}</b-alert>\n    <b-alert show variant=\"primary\" v-else>You can close the window</b-alert>\n  </div>\n</template>\n\n<script>\n    /*\n       This component is the return page after OAuth2 from ORCID.\n       see getTokenFromCurrentUrl in service/orcid.js \n     */\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n    name: 'LoginPage',\n    data() {\n        return {\n            error: null,\n        }\n    },\n    computed: {\n        ...mapState(['user']),\n    },\n    methods: {\n        ...mapActions(['updateUnregisteredUser', 'updateOrcidUser'])\n    },\n    async mounted () {\n        this.token = await this.$orcid.getTokenFromCurrentUrl();\n\n        if (this.token.error) {\n            this.error = this.token.error;\n            // do no close the window\n            return\n        }\n\n        // name = family_name + \" \" + given_name\n        // but deal with the fact that values can be null \n        const name = []\n        if (this.token.data.given_name != null) {\n            name.push(this.token.data.given_name);\n        }\n        if (this.token.data.family_name != null) {\n            name.push(this.token.data.family_name);\n        }\n        if (name.length == 0) {\n            // should not happen: OrcID account without family name and given name\n            // just in case: we display the orcid \n            name.push(this.token.data.orcid)\n        }\n\n        // send the token to the caller\n        window.opener.setOrcidToken({\n            'name': name.join(\" \"),\n            'orcid': this.token.data.orcid,\n            'orcidToken': this.token.id_token,\n            'orcidTopenExp': this.token.exp,\n        });\n\n        // close this window\n        window.close();\n    }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginPage.vue?vue&type=template&id=779e24cc&\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}